!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).ConstrainoDelaunato=r()}(this,(function(){"use strict";var t,r=Math.pow(2,-52),i=new Uint32Array(512),s=function(t){var r=t.length>>1;if(r>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var i=Math.max(2*r-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(r)),this._hullPrev=new Uint32Array(r),this._hullNext=new Uint32Array(r),this._hullTri=new Uint32Array(r),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(r),this._dists=new Float64Array(r),this.update()};function o(t,r,i,s){var o=t-i,n=r-s;return o*o+n*n}function n(t,r,i,s,o,n){var e=(s-r)*(o-t),h=(i-t)*(n-r);return Math.abs(e-h)>=33306690738754716e-32*Math.abs(e+h)?e-h:0}function e(t,r,i,s,o,e){return(n(o,e,t,r,i,s)||n(t,r,i,s,o,e)||n(i,s,o,e,t,r))<0}function h(t,r,i,s,o,n){var e=i-t,h=s-r,a=o-t,l=n-r,u=e*e+h*h,c=a*a+l*l,d=.5/(e*l-h*a),f=(l*u-h*c)*d,v=(e*c-a*u)*d;return f*f+v*v}function a(t,r,i,s){if(s-i<=20)for(var o=i+1;o<=s;o++){for(var n=t[o],e=r[n],h=o-1;h>=i&&r[t[h]]>e;)t[h+1]=t[h--];t[h+1]=n}else{var u=i+1,c=s;l(t,i+s>>1,u),r[t[i]]>r[t[s]]&&l(t,i,s),r[t[u]]>r[t[s]]&&l(t,u,s),r[t[i]]>r[t[u]]&&l(t,i,u);for(var d=t[u],f=r[d];;){do{u++}while(r[t[u]]<f);do{c--}while(r[t[c]]>f);if(c<u)break;l(t,u,c)}t[i+1]=t[c],t[c]=d,s-u+1>=c-i?(a(t,r,u,s),a(t,r,i,c-1)):(a(t,r,i,c-1),a(t,r,u,s))}}function l(t,r,i){var s=t[r];t[r]=t[i],t[i]=s}function u(t){return t[0]}function c(t){return t[1]}function d(t){return t%3==2?t-2:t+1}function f(t,r,i){void 0===i&&(i=!1);var s=(r.y1-r.y0)*(t.x1-t.x0)-(r.x1-r.x0)*(t.y1-t.y0);if(0===s)return{x:1/0,y:1/0};var o=t.y0-r.y0,n=t.x0-r.x0,e=(r.x1-r.x0)*o-(r.y1-r.y0)*n,h=(t.x1-t.x0)*o-(t.y1-t.y0)*n;o=e/s,n=h/s;var a={x:t.x0+o*(t.x1-t.x0),y:t.y0+o*(t.y1-t.y0)},l=function(t,r){var i={a:!1,b:!1};t>0&&t<1&&(i.a=!0);r>0&&r<1&&(i.b=!0);return i}(o,n);return i&&(l=function(t,r){var i={a:!1,b:!1};t>=0&&t<=1&&(i.a=!0);r>=0&&r<=1&&(i.b=!0);return i}(o,n)),l.a&&l.b?a:{x:1/0,y:1/0}}function v(t,r){var i=t[0],s=t[1];return i*r[0]+s*r[1]}function y(t,r){var i=t[0],s=t[1],o=r[0];return(s-r[1])/(i-o)}function g(r,i){var s={x:r[0]-t.x,y:r[1]-t.y},o={x:i[0]-t.x,y:i[1]-t.y},n=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2)),e=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),h=180*Math.acos((o.x*s.x+o.y*s.y)/(n*e))/Math.PI,a=s.x*o.y-o.x*s.y;return h=isNaN(h)?0:h,h=a>0?360-h:h}function p(t,r){var i=t[0],s=t[1],o=r[0],n=r[1];return Math.abs(i-o)+Math.abs(s-n)}function x(t,r){var i=t[0],s=t[1],o=r[0],n=r[1];return Math.sqrt(Math.pow(i-o,2)+Math.pow(s-n,2))}function _(r,i,s,o,n,e){var h;"dist"===n?h=p:"distrel"===n?h=p:"euclid"===n?h=x:"polar"===n?(h=g,t={x:e[0],y:e[1]}):"dot"===n?h=v:Array.isArray(s[0])?h=v:(r=r[0],h=function(t,r){return t-r}),function(t,r,i,s,o,n){var e=(h=s-1,Math.floor((h-1)/2));var h;for(;e>=0;)b(t,r,i,e,s-1,o,n),e--}(r,s,i,o,h,n);for(var a=o-1;a>0;)M(i,a,0),b(r,s,i,0,--a,h,n)}function b(t,r,i,s,o,n,e){for(var h=s,a=function(t){return 2*t+1};a(h)<=o;){var l=a(h),u=h,c=function(s){var o=n([r[i[s]],r[i[s]+1]],t);return"distrel"===e&&(t=[r[i[s]],r[i[s]+1]]),o};if(c(u)<c(l)&&(u=l),l+1<=o&&c(u)<c(l+1)&&(u=l+1),u===h)return;M(i,h,u),h=u}}function M(t,r,i){var s=t[r];t[r]=t[i],t[i]=s}function w(t,r){var i=0,s=-1/0,o=-1/0;if(r)for(var n=0,e=r.entries();n<e.length;n+=1){var h=e[n],a=h[0],l=h[1];t[l]>o?(o=t[l],s=t[l+1],i=a):t[l+1]>=s&&t[l]>=o&&(o=t[l],s=t[l+1],i=a)}else for(var u=0;u>t.length;u++)t[u]>o&&(o=t[u],i=u);return{x:o,y:s,i:i}}function A(t,r){var i=0,s=1/0,o=1/0;if(r)for(var n=0,e=r.entries();n<e.length;n+=1){var h=e[n],a=h[0],l=h[1];t[l+1]<s?(o=t[l],s=t[l+1],i=a):t[l+1]<=s&&t[l]<=o&&(o=t[l],s=t[l+1],i=a)}else for(var u=0;u<t.length;u++)t[u]<o&&(o=t[u],i=u);return{x:o,y:s,i:i}}function k(t,r,i,s,o){return _(s,r,t,r.length,i,o),r}s.from=function(t,r,i){void 0===r&&(r=u),void 0===i&&(i=c);for(var o=t.length,n=new Float64Array(2*o),e=0;e<o;e++){var h=t[e];n[2*e]=r(h),n[2*e+1]=i(h)}return new s(n)},s.prototype.update=function(){for(var t=this.coords,i=this._hullPrev,s=this._hullNext,n=this._hullTri,l=this._hullHash,u=t.length>>1,c=1/0,d=1/0,f=-1/0,v=-1/0,y=0;y<u;y++){var g=t[2*y],p=t[2*y+1];g<c&&(c=g),p<d&&(d=p),g>f&&(f=g),p>v&&(v=p),this._ids[y]=y}for(var x,_,b,M=(c+f)/2,w=(d+v)/2,A=1/0,k=0;k<u;k++){var m=o(M,w,t[2*k],t[2*k+1]);m<A&&(x=k,A=m)}var S=t[2*x],L=t[2*x+1];A=1/0;for(var P=0;P<u;P++)if(P!==x){var C=o(S,L,t[2*P],t[2*P+1]);C<A&&C>0&&(_=P,A=C)}for(var O=t[2*_],I=t[2*_+1],T=1/0,z=0;z<u;z++)if(z!==x&&z!==_){var D=h(S,L,O,I,t[2*z],t[2*z+1]);D<T&&(b=z,T=D)}var U=t[2*b],K=t[2*b+1];if(T===1/0){for(var H=0;H<u;H++)this._dists[H]=t[2*H]-t[0]||t[2*H+1]-t[1];a(this._ids,this._dists,0,u-1);for(var j=new Uint32Array(u),q=0,F=0,X=-1/0;F<u;F++){var B=this._ids[F];this._dists[B]>X&&(j[q++]=B,X=this._dists[B])}return this.hull=j.subarray(0,q),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(e(S,L,O,I,U,K)){var N=_,E=O,Y=I;_=b,O=U,I=K,b=N,U=E,K=Y}var G=function(t,r,i,s,o,n){var e=i-t,h=s-r,a=o-t,l=n-r,u=e*e+h*h,c=a*a+l*l,d=.5/(e*l-h*a);return{x:t+(l*u-h*c)*d,y:r+(e*c-a*u)*d}}(S,L,O,I,U,K);this._cx=G.x,this._cy=G.y;for(var J=0;J<u;J++)this._dists[J]=o(t[2*J],t[2*J+1],G.x,G.y);a(this._ids,this._dists,0,u-1),this._hullStart=x;var Q=3;s[x]=i[b]=_,s[_]=i[x]=b,s[b]=i[_]=x,n[x]=0,n[_]=1,n[b]=2,l.fill(-1),l[this._hashKey(S,L)]=x,l[this._hashKey(O,I)]=_,l[this._hashKey(U,K)]=b,this.trianglesLen=0,this._addTriangle(x,_,b,-1,-1,-1);for(var R=0,V=void 0,W=void 0;R<this._ids.length;R++){var Z=this._ids[R],$=t[2*Z],tt=t[2*Z+1];if(!(R>0&&Math.abs($-V)<=r&&Math.abs(tt-W)<=r)&&(V=$,W=tt,Z!==x&&Z!==_&&Z!==b)){for(var rt=0,it=0,st=this._hashKey($,tt);it<this._hashSize&&(-1===(rt=l[(st+it)%this._hashSize])||rt===s[rt]);it++);for(var ot=rt=i[rt],nt=void 0;nt=s[ot],!e($,tt,t[2*ot],t[2*ot+1],t[2*nt],t[2*nt+1]);)if((ot=nt)===rt){ot=-1;break}if(-1!==ot){var et=this._addTriangle(ot,Z,s[ot],-1,-1,n[ot]);n[Z]=this._legalize(et+2),n[ot]=et,Q++;for(var ht=s[ot];nt=s[ht],e($,tt,t[2*ht],t[2*ht+1],t[2*nt],t[2*nt+1]);)et=this._addTriangle(ht,Z,nt,n[Z],-1,n[ht]),n[Z]=this._legalize(et+2),s[ht]=ht,Q--,ht=nt;if(ot===rt)for(;e($,tt,t[2*(nt=i[ot])],t[2*nt+1],t[2*ot],t[2*ot+1]);)et=this._addTriangle(nt,Z,ot,-1,n[ot],n[nt]),this._legalize(et+2),n[nt]=et,s[ot]=ot,Q--,ot=nt;this._hullStart=i[Z]=ot,s[ot]=i[ht]=Z,s[Z]=ht,l[this._hashKey($,tt)]=Z,l[this._hashKey(t[2*ot],t[2*ot+1])]=ot}}}this.hull=new Uint32Array(Q);for(var at=0,lt=this._hullStart;at<Q;at++)this.hull[at]=lt,lt=s[lt];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)},s.prototype._hashKey=function(t,r){return Math.floor((i=t-this._cx,s=r-this._cy,o=i/(Math.abs(i)+Math.abs(s)),(s>0?3-o:1+o)/4*this._hashSize))%this._hashSize;var i,s,o},s.prototype._legalize=function(t){for(var r,s,o,n,e,h,a,l,u,c,d,f,v,y,g,p,x=this._triangles,_=this._halfedges,b=this.coords,M=0,w=0;;){var A=_[t],k=t-t%3;if(w=k+(t+2)%3,-1!==A){var m=A-A%3,S=k+(t+1)%3,L=m+(A+2)%3,P=x[w],C=x[t],O=x[S],I=x[L];if(r=b[2*P],s=b[2*P+1],o=b[2*C],n=b[2*C+1],e=b[2*O],h=b[2*O+1],a=b[2*I],l=b[2*I+1],u=void 0,c=void 0,d=void 0,f=void 0,v=void 0,y=void 0,void 0,g=void 0,p=void 0,(u=r-a)*((f=n-l)*(p=(v=e-a)*v+(y=h-l)*y)-(g=(d=o-a)*d+f*f)*y)-(c=s-l)*(d*p-g*v)+(u*u+c*c)*(d*y-f*v)<0){x[t]=I,x[A]=P;var T=_[L];if(-1===T){var z=this._hullStart;do{if(this._hullTri[z]===L){this._hullTri[z]=t;break}z=this._hullPrev[z]}while(z!==this._hullStart)}this._link(t,T),this._link(A,_[w]),this._link(w,L);var D=m+(A+1)%3;M<i.length&&(i[M++]=D)}else{if(0===M)break;t=i[--M]}}else{if(0===M)break;t=i[--M]}}return w},s.prototype._link=function(t,r){this._halfedges[t]=r,-1!==r&&(this._halfedges[r]=t)},s.prototype._addTriangle=function(t,r,i,s,o,n){var e=this.trianglesLen;return this._triangles[e]=t,this._triangles[e+1]=r,this._triangles[e+2]=i,this._link(e,s),this._link(e+1,o),this._link(e+2,n),this.trianglesLen+=3,e};var m=0,S=function(t,r){void 0===r&&(r=3),this.k=r,this.coords=t.slice(),this.index=[].concat(this.coords.keys()).filter((function(t){return t%2==0})),this.index=this.clean(this.index),this.center=this.calcCenter(),this.minY=A(this.coords,this.index),this.minX=function(t,r){var i=0,s=1/0,o=1/0;if(r)for(var n=0,e=r.entries();n<e.length;n+=1){var h=e[n],a=h[0],l=h[1];t[l]<o?(o=t[l],s=t[l+1],i=a):t[l+1]<=s&&t[l]<=o&&(o=t[l],s=t[l+1],i=a)}else for(var u=0;u<t.length;u++)t[u]<o&&(o=t[u],i=u);return{x:o,y:s,i:i}}(this.coords,this.index),this.maxX=w(this.coords,this.index),this.cPoints=[],this.ray=null,this.hull=this.findConcaveHull(r)},L={hullCoords:{configurable:!0},coords2D:{configurable:!0},sortedCoords:{configurable:!0}};S.prototype.findConcaveHull=function(t){var r=this.sortHeapAndClean(this.coords,this.index,"polar",[this.minX.x,this.minY.y],[this.center.x,this.center.y]);return this.concave(r,t)},S.prototype.concave=function(t,r){var i=t.slice();if(t.length<3)return console.log("len less than 3"),null;if(r>t.length-1)return console.log(m),console.log("k is too big"),null;if(3===t.length)return console.log("len 3"),t;var s=Math.min(Math.max(r,3),t.length-1),o=A(this.coords,t).i,n={i:o,coord:t[o]},e=n.coord,h=[n.coord],a=1;for(t.splice(n.i,1);(e!==n.coord||1===a)&&t.length>0;){m++,4===a&&t.push(n.coord);for(var l=this.nearestPoints(t,e,s),u=this.sortByAngle(l,e,h[h.length-2]),c=!0,d=-1;c&&d<u.length-1;){var v=0;u[d]===n.coord&&(v=1);var y=1;for(c=!1;!c&&y<h.length-v;){var g={x0:this.coords[h[a-1]],y0:this.coords[h[a-1]+1],x1:this.coords[u[d+1]],y1:this.coords[u[d+1]+1]},p={x0:this.coords[h[a-y]],y0:this.coords[h[a-y]+1],x1:this.coords[h[a-1-y]],y1:this.coords[h[a-1-y]+1]},x=f(p,g,!0),_=p.x0===g.x0&&p.y0===g.y0,b=u[d+1]===n.coord&&p.x1===g.x1&&p.y1===g.y1;!isFinite(x.x)||_||b||(c=!0),y++}d++}if(this.cPoints=u.slice(),c)return this.concave(i,++s);if(e=u[d],h.push(e),m>1/0)return h;t.splice(t.indexOf(e),1),a++}for(var M=!0,w=0,k=t;w<k.length;w+=1){var S=k[w];if(!(M=this.pointInOrOut([this.coords[S],this.coords[S+1]],h,this.maxX.x+10)))break}return M?(this.k=s,h):this.concave(i,++s)},S.prototype.sortByAngle=function(t,r,i){i=i&&i!==r?[this.coords[i],this.coords[i+1]]:[this.maxX.x+10,this.coords[r+1]],this.ray={x0:i[0],y0:i[1],x1:this.coords[r],y1:this.coords[r+1]};for(var s,o,n=[this.coords[r],this.coords[r+1]],e=k(this.coords,t,"polar",i,n).slice(),h=0;h<e.length;h++){var a=[this.coords[e[h-1]],this.coords[e[h-1]+1]];0===h&&(a=n);var l=[this.coords[e[h]],this.coords[e[h]+1]],u=y(a,l),c=x(n,l);s&&o&&(Math.abs(u)===Math.abs(s)||u===1/0&&s===-1/0)&&c<o?(M(e,h,h-1),o=x(n,[this.coords[e[h]],this.coords[e[h]+1]])):o=c,s=y(a,l)}return e},S.prototype.nearestPoints=function(t,r,i){var s=[this.coords[r],this.coords[r+1]];t=k(this.coords.slice(),t.slice(),"euclid",s);var o,n=[];i=Math.min(i,t.length-1);for(var e=0,h=0;h<i;){var a=y(s,[this.coords[t[e]],this.coords[t[e]+1]]);if(o&&a===o||(n.push(t[e]),h++),++e>t.length-1)return n;o=a}return n},S.prototype.sortHeapAndClean=function(t,r,i,s,o){return r=k(t.slice(),r.slice(),i,s,o),r=this.clean(r)},S.prototype.clean=function(t){for(var r=t.length,i=0,s=[],o=0,n=t;o<n.length;o+=1){for(var e=n[o],h=0;h<t.length;h++)if(this.coords[t[h]]===this.coords[e]&&this.coords[t[h]+1]===this.coords[e+1]&&i!==h){for(var a=!0,l=0,u=s;l<u.length;l+=1){var c=u[l];this.coords[t[h]]===this.coords[c[0]]&&this.coords[t[h]+1]===this.coords[c[0]+1]&&(a=!1,c[1]++)}a&&s.push([e,0]);break}i++}for(var d=[],f=0;f<t.length;f++){for(var v=!0,y=0,g=s;y<g.length;y+=1){var p=g[y];this.coords[t[f]]===this.coords[p[0]]&&this.coords[t[f]+1]===this.coords[p[0]+1]&&p[1]>0&&(p[1]--,v=!1)}v&&d.push(t[f])}return console.log("items removed: "+(r-d.length)),d},S.prototype.calcCenter=function(){for(var t={x:0,y:0},r=0;r<this.coords.length;r+=2)t.x+=this.coords[r],t.y+=this.coords[r+1];return t.x/=this.coords.length/2,t.y/=this.coords.length/2,t},S.prototype.pointInOrOut=function(t,r,i){var s={x0:t[0],y0:t[1],x1:i,y1:t[1]};this.ray=s;for(var o=0,n={x:1/0,y:1/0},e=0;e<r.length;e++){var h={x0:this.coords[r[e]],y0:this.coords[r[e]+1],x1:this.coords[r[e+1>r.length-1?0:e+1]],y1:this.coords[r[e+1>r.length-1?0:e+1]+1]},a=f(s,h,!0);if(isFinite(a.x)){var l=Math.round(1e6*a.x)===n.x&&Math.round(1e6*a.y)===n.y;h.y1-h.y0>0&&!l?o++:h.y1-h.y0<0&&!l&&o--,n={x:Math.round(1e6*a.x),y:Math.round(1e6*a.y)}}}return 0!==Math.abs(o)},S.prototype.printPoints=function(t){for(var r=[],i=0,s=t;i<s.length;i+=1){var o=s[i];r.push(this.coords[o],this.coords[o+1])}console.log(r)},L.hullCoords.get=function(){return this.subset(this.hull)},S.prototype.subset=function(t){for(var r=[],i=0,s=t;i<s.length;i+=1){var o=s[i];r.push(this.coords[o],this.coords[o+1])}return r},L.coords2D.get=function(){for(var t=[],r=this.sortedCoords;r.length;)t.push(r.splice(0,2));return t},L.sortedCoords.get=function(){for(var t=[],r=0,i=this.hull;r<i.length;r+=1){var s=i[r];t.push(this.coords[s],this.coords[s+1])}return t},Object.defineProperties(S.prototype,L);var P=function(t){function r(r,i){void 0===i&&(i=3),t.call(this,r,i),this.cPoints=[],this.origCoordsLen=r.length,this.intersectingLineSegs=[]}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={k:{configurable:!0}};return r.prototype.addPoints=function(t,r,i){var s=this;this.k=3;for(var o=function(t){for(var r=[],i=0;i<t.triangles.length;i++)i>t.halfedges[i]&&r.push(2*t.triangles[i],2*t.triangles[d(i)]);return r}(r),n=function(r){var n=s.subset([s.hull[r],s.hull[r+1]]),e={x0:n[0],y0:n[1],x1:n[2],y1:n[3]},h=s.getIntersectingLines(e,o,t,i).reverse(),a=k(h.map((function(t){return[t[t.length-1].x,t[t.length-1].y]})).flat(),[].concat(Array(h.length).keys()).map((function(t){return 2*t})),"euclid",[e.x0,e.y0]);s.intersectingLineSegs.push(s.hull[r]);var l=s.coords.length;s.coords=s.coords.concat(h.map((function(t){return[t[t.length-1].x,t[t.length-1].y]})).flat()),s.intersectingLineSegs=s.intersectingLineSegs.concat(a.map((function(t){return t+l})))},e=0;e<s.hull.length-1;e++)n(e);this.intersectingLineSegs.push(this.intersectingLineSegs[0]),this.hull=this.intersectingLineSegs,this.clean(this.hull)},r.prototype.getIntersectingLines=function(t,r,i,s,o){void 0===o&&(o=null);for(var n,e,h=[],a=0;a<r.length;a+=2){var l={x:i[r[a]],y:i[r[a]+1]};if((n=t,e=l,Math.abs((n.y1-n.y0)*e.x-(n.x1-n.x0)*e.y+n.x1*n.y0-n.y1*n.x0)/Math.sqrt(Math.pow(n.y1-n.y0,2)+Math.pow(n.x1-n.x0,2)))<=s){a+1>r.length-1&&(a=-1);var u=f(t,{x0:l.x,y0:l.y,x1:i[r[a+1]],y1:i[r[a+1]+1]},!1);isFinite(u.x)&&(o&&o([r[a],r[a+1],u]),h.push([r[a],r[a+1],u]))}}return h},i.k.get=function(){return t.prototype.k},i.k.set=function(r){t.prototype.k=r},Object.defineProperties(r.prototype,i),r}(S),C=function(t,r){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];if(t&&Array.isArray(t[0])&&2===t[0].length)t=t.flat();else if(t&&Array.isArray(t[0])&&2!==t[0].length)return;this.delaunator=new s(t),this.boundaries=[],this.boundedDelaunators=[];for(var n=0,e=i;n<e.length;n+=1){var h=e[n];h&&Array.isArray(h[0])&&2===h[0].length&&(h=h.flat()),h?this.boundaries.push(new P(h,r)):this.boundaries.push(new P(t,r)),this.boundaries[this.boundaries.length-1].addPoints(t,this.delaunator,10),this.boundedDelaunators.push(this.setTrianglesInsideBound(this.boundaries[this.boundaries.length-1]))}this.boundary=this.boundaries[this.boundaries.length-1],this.boundedDelaunator=this.boundedDelaunators[this.boundedDelaunators.length-1]},O={coords2D:{configurable:!0},coords:{configurable:!0},triangles:{configurable:!0},hull:{configurable:!0}};return C.prototype.setTrianglesInsideBound=function(t){for(var r=[],i=[].concat(this.delaunator.coords.keys()).filter((function(t){return t%2==0})),o=w(this.delaunator.coords,i),n=0,e=i;n<e.length;n+=1){var h=e[n],a={x:this.delaunator.coords[h],y:this.delaunator.coords[h+1]};t.pointInOrOut([a.x,a.y],t.hull,o.x+10)&&r.push(a.x,a.y)}r=r.concat(t.subset(t.hull));for(var l=new s(r),u=[],c=0;c<l.triangles.length/3;c++){for(var d=3*c,f=0,v=0,y=0;y<3;y++)f+=l.coords[2*l.triangles[y+d]],v+=l.coords[2*l.triangles[y+d]+1];var g={x:f/3,y:v/3};t.pointInOrOut([g.x,g.y],t.hull,o.x+10)&&u.push(l.triangles[d],l.triangles[d+1],l.triangles[d+2])}return l.triangles=new l.triangles.constructor(u),l},C.prototype.update=function(t){for(var r=this.coords,i=0,o=t.flat();i<o.length;i+=1){var n=o[i];r.push(n)}this.delaunator=new s(r)},O.coords2D.get=function(){for(var t=[],r=this.coords,i=0;i<r.length;i+=2)t.push([r[i],r[i+1]]);return t},O.coords.get=function(){return this.delaunator.coords},O.triangles.get=function(){return this.delaunator.triangles},O.hull.get=function(){return this.delaunator.hull},Object.defineProperties(C.prototype,O),C}));
